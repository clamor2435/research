%全体の２段組.tex 
\documentclass[a4j,twocolumn,fleqn]{jarticle}

  \usepackage{bacheloryokou-ec} % EC-日本語用
  %\usepackage{bacheloryokou-ec-eng} % For EC Eng.
  %\usepackage{bacheloryokou-ie} % IE-日本語用
  %\usepackage{bacheloryokou-ie-eng} % For IE Eng.
  \usepackage{amsmath}
  \Midterm % 中間発表/Midterm Presentation (最終発表時はコメントアウト)
  \Hiduke{2018年X月XX日} % 発表日/Date
  \Kosu{情報通信システムコース} % 講座/コース
  \Bangou{1731020} % 学籍番号/Number
  \Shimei{井田 恒太郎} % 氏名/Name
  \Daimoku{XXXXXXXX} % 題目/Title
  \Pshidou{キットスワン ナッタポン 助教} % 主指導教官
  \Sshidou{} % 副指導教官
  
%%%%%%    TEXT START    %%%%%% 
\begin{document} 
\Title
\section{XX}

\section{XX}

\subsection{ドメイン間の光路供給}
XXXXX\\

{\large \bf 目的関数}%%%%%%%%%%%%%%%%%%%%%%目的関数%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{equation}
min \sum_{n \in N} \sum_{f \in F} \sum_{l^{ij}_{km} \in E}(yp^{nij}_{kmf} + yb^{nij}_{kmf})
\end{equation}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%目的関数%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{SDS Strategy}
XXXXXXXXX\\
{\large \bf 制約条件}

\begin{equation}%%%%%%%%%%%%%%%%%%%%制約条件その1%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\sum_{f \in F}xp^{nij}_{kmf} \leq 1 \quad l^{ij}_{km} \in E
\end{equation}%%%%%%%%%%%%%%%%%%%%%%%制約条件その1%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{equation}%%%%%%%%%%%%%%%%%%%%%%制約条件その2%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\sum_{f \in F}xb^{nij}_{kmf} \leq 1 \quad l^{ij}_{km}\in E
\end{equation}
\begin{eqnarray}%%%%%%%%%%%%%%%%%%%%%%制約条件その3%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
xp^{nij}_{kmf} \leq yp^{nij}_{kmf}, n \in N, l^{ij}_{km} \in E, \\
f \in \{0, ... , |F|-r(n)\},f' \in \{f, ... ,f + r(n)-1\}\nonumber
%\sum_{n\in N}(x^{nij}_{km}+y^{nij}_{km})\leq C^G_{ij,km},l^{ij}_{km} \in E\\
%p^{nij}_{km}+b^{nij}_{km} \leq 1, n\in N,l^{ij}_{km}\in E\\
%\sum_{(k,m):l^{ij}_{km} \in E}p^{nij}_{km}= \sum_{(k,m):l^{ij}_{km} \in E} b^{nij}_{km}\nonumber \\
%n \in N ,i \in D, j \in D, i \neq j
\end{eqnarray}%%%%%%%%%%%%%%%%%%%%%%制約条件その3%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{eqnarray}%%%%%%%%%%%%%%%%%%%%制約条件その4%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
xb^{nij}_{kmf} \leq yb^{nij}_{kmf}, n \in N, l^{ij}_{km} \in E, \\
f \in \{0, ... , |F|-r(n)\},f' \in \{f, ... ,f + r(n)-1\}\nonumber
%\sum_{l^{ij}_{km}\in E}p^{nij}_{km}\leq \sum_{l^{ij}_{km}\in E}b^{nij}_{km},n n\in N\\
%y^{nij}_{km}\leq p^{mij}_{km}C^G_{ij,km},n\in N ,l^{ij}_{km} \in E\\
%y^{nij}_{km}\le p^{mij}_{km},n \in N, l^{ij}_{km}\in E\\
%y^{nij}_{km}\leq b^{mij}_{km}C^G_{ij,km},n\in N ,l^{ij}_{km} \in E\\
%y^{nij}_{km}\le b^{mij}_{km},n \in N, l^{ij}_{km}\in E\\
%x^{nij} \in \{0,1,2,・・・\} ,n \in N, l^{ij}_{km}\in E\\
%y^{nij} \in \{0,1,2,・・・\} ,n \in N, l^{ij}_{km}\in E\\
%p^{mij}_{km}\in  \{0,1\},n \in N, l^{ij}_{km}\in E
\end{eqnarray}%%%%%%%%%%%%%%%%%%%%制約条件その4%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{eqnarray}%%%%%%%%%%%%%%%%%%%%制約条件その5%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
xp^{nij}_{kmf} = 0 & \forall l^{ij}_{km} \in E, \\
f \in \{|F| - r(n)+1, \dots ,|F|-1\}\nonumber
\end{eqnarray}%%%%%%%%%%%%%%%%%%%%制約条件その5%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{eqnarray}%%%%%%%%%%%%%%%%%%%%制約条件その6%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
xb^{nij}_{kmf} = 0 & \forall l^{ij}_{km} \in E, \\
f \in \{|F| - r(n)+1, \dots ,|F|-1\}\nonumber
\end{eqnarray}%%%%%%%%%%%%%%%%%%%%制約条件その6%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{equation}%%%%%%%%%%%%%%%%%%制約条件その7%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\sum_{n \in N} (yp^{nij}_{kmf} + yb^{nij}_{kmf}) \leq 1 \quad l^{ij}_{km} \in E, f \in F
\end{equation}%%%%%%%%%%%%%%%%%%制約条件その7%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{equation}
\sum_{f \in F}\sum_{l^{ij}_{km}\in E}xp^{nij}_{kmf} = p(n)\quad n \in N
\end{equation}
\begin{equation}
\sum_{f \in F}\sum_{l^{ij}_{km}\in E}xp^{nij}_{kmf} = b(n)\quad n \in N
\end{equation}
\\
\begin{equation}
\sum_{f \in F}xp^{nij}_{kmf} = \frac{1}{r(n)}\sum_{f\in F}yp^{nij}_{kmf}\quad n \in N,\quad l^{ij}_{km} \in E
\end{equation}
\begin{equation}
\sum_{f \in F}xb^{nij}_{kmf} = \frac{1}{r(n)}\sum_{f\in F}yb^{nij}_{kmf}\quad n \in N,\quad l^{ij}_{km} \in E
\end{equation}
\begin{equation}
\sum_{l^{ij}_{km}\in E}xp^{nij}_{kmf} = p(n)\quad f \in F,\quad n \in N
\end{equation}
\begin{equation}
\sum_{l^{ij}_{km}\in E}xp^{nij}_{kmf} = b(n)\quad f \in F,\quad n \in N
\end{equation}
\begin{eqnarray}%%%%%%%%%%%%%%%%%%%%%%制約条件その8%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\sum_{f \in F}\sum_{(j,m):l^{ij}_{km}\in E}yp^{nij}_{kmf} - \sum_{f \in F}\sum_{(j,m):l^{ji}_{mk}\in E}yp^{nji}_{mkf}= \nonumber \\
\begin{cases}
r_n & (v^i_k = s_n)\\
-r_n & (v^i_k =d_n)\\
0 & (otherwise)
\end{cases}
\end{eqnarray}%%%%%%%%%%%%%%%%%%%%%%制約条件その8%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{eqnarray}%%%%%%%%%%%%%%%%%%%%%%制約条件その9%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\sum_{f \in F}\sum_{(j,m):l^{ij}_{km}\in E}yb^{nij}_{kmf} - \sum_{f \in F}\sum_{(j,m):l^{ji}_{mk}\in E}yb^{nji}_{mkf}= \nonumber \\
\begin{cases}
r_n & (v^i_k = s_n)\\
-r_n & (v^i_k =d_n)\\
0 & (otherwise)
\end{cases}
\end{eqnarray}%%%%%%%%%%%%%%%%%%%%%%制約条件その9%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{equation}
\sum_{f \in F} \sum_{n \in N}(yp^{nij}_{kmf}+yb^{nij}_{kmf}) \leq |F| \quad  l^{ij}_{km} \in E
\end{equation}
\begin{equation}
\sum_{f \in F}(xp^{nij}_{kmf} + xb^{nij}_{kmf}) \leq 1 \quad n \in N \quad l^{ij}_{km} \in E
%p^{nij}_{km} + b^{nij}_{km} \leq 1 \quad n \in N \quad l^{ij}_{km} \in E
\end{equation}
\begin{equation}
\sum_{(k,m):l^{ij}_{km} \in E}\sum_{f in F}xp^{nij}_{kmf} = \sum_{(k,m):l^{ij}_{km}\in E}\sum_{f \in F}xb^{nij}_{kmf}\quad n \in N,\quad i \neq j
%\sum_{(k,m):l^{ij}_{km}\in E}p^{nij}_{km} = \sum_{(k,m):l^{ij}_{km}\in E}b^{nij}_{km},\quad n \in N,i,j \in D, i\neq j
\end{equation}
\begin{equation}
\sum_{l^{ij}_{km}\in E}\sum_{f \in F}xp^{nij}_{kmf} \leq \sum_{l^{ij}_{km}\in E}\sum_{f \in F}xb^{nij}_{kmf}\quad n \in N
%\sum_{l^{ij}_{km}\in E}p^{nij}_{km} \leq \sum_{l^{ij}_{km}\in E}b^{nij}_{km}
\end{equation}

\newpage
\subsection{各パラメータ・変数・式の説明}
$N$はリクエスト数の集合、$F$はインデックス数の集合、$E$はリンクの集合を表している。また、$l^{ij}_{km}$はドメイン$i$のノード$k$からドメイン$j$のノード$m$までのリンクを表している。$xp,xb$はプライマリパス、バックアップパスで使用しているインデックスの先頭を表す変数で、$yp,yb$がプライマリパス、バックアップパスで使用しているインデックスその物を表す変数、$p,b$がプライマリパスとバックアップパスのホップ数を表す変数である。(1)が目的関数で、使用インデックス数を最小化するパスを供給する。(2)~(20)が制約条件で(2)~(10)が変数の制約条件、(11)~(20)がフロー制約条件となっている。(2),(3)式は先頭となるインデックスが一つであることを示している。(4)(5)式はインデックスの連続性を示し、(6),(7)式はそのリクエストが使用するインデックスの先頭になり得ない部分にインデックスが割り当てられないことを示す。(8)式はプライマリパスとバックアップパスが同じリンクの同じインデックスを使用しないことを示す。(9),(10)式はそのリクエストのホップ数を示す。(11),(12)式は$xp,xb$と$yp,yb$の間の関係式で、(13)(14)式がインデックスの一貫性を示している。(15),(16)式はノードに対する流入量と流出量の関係式で始点、終点、それ以外の三つで場合分けを行っている。(17)式がリンクで使用しているインデックス数の最大値を示し、(18)式が、リンク重複を制限している。(19)式はSame Domain Sequence Strategyを示す式で、プライマリパス、バックアップパスが同じドメインシーケンスを持つことを示す。(20)式がホップ数の小さい方を優先してプライマリパスに割り当てることを示す。
\end{document}

